// Validate phone numbers for Jogo 1
// Check for duplicates and missing IDs

const batch1 = `140050582254 11957186500@tvzapao.com.br
140054102170 11983947960@tvzapao.com.br
139406100999 11954803671@tvzapao.com.br
140054806722 11982591171@tvzapao.com.br
139410830895 11991236554@tvzapao.com.br
140058810890 11990025080@tvzapao.com.br
140059972312 11981661130@tvzapao.com.br
140058131128 11985010980@tvzapao.com.br
139410505139 11987504433@tvzapao.com.br
139408853871 11996150191@tvzapao.com.br
140056224096 11949255449@tvzapao.com.br
139410289241 11962088679@tvzapao.com.br
139410451163 11984853808@tvzapao.com.br
140059902438 11944873619@tvzapao.com.br
140057329680 11985005275@tvzapao.com.br
139411892485 11959962644@tvzapao.com.br
140058131196 11952551894@tvzapao.com.br
140059026868 11969150049@tvzapao.com.br
139410505197 11983064596@tvzapao.com.br
140057329702 11956958828@tvzapao.com.br
139412442243 11995371928@tvzapao.com.br
139410505205 11963883136@tvzapao.com.br
140059664600 11972594502@tvzapao.com.br
139409785471 11983455545@tvzapao.com.br
140059736552 11961201819@tvzapao.com.br
140059026908 11981288822@tvzapao.com.br
140060598166 11994561950@tvzapao.com.br
139410992949 11949294506@tvzapao.com.br
139409089883 11930738765@tvzapao.com.br
139412026495 11963149754@tvzapao.com.br
140058307334 11968028518@tvzapao.com.br
139410289365 11981700608@tvzapao.com.br
140058741130 11999644450@tvzapao.com.br
140059370810 11963522280@tvzapao.com.br
140059026984 11949293036@tvzapao.com.br
139410505347 11958508611@tvzapao.com.br
140058307374 11971422973@tvzapao.com.br
140059144922 11957398511@tvzapao.com.br
140058825212 11910589527@tvzapao.com.br
139408798001 11915621964@tvzapao.com.br
140057329862 11959652313@tvzapao.com.br
139412630341 11933454529@tvzapao.com.br
140060024606 11988642779@tvzapao.com.br
140060008602 11976883895@tvzapao.com.br
139410505449 11986673721@tvzapao.com.br
139409489769 11952995525@tvzapao.com.br
140059370912 11960372873@tvzapao.com.br
140059552894 11978619331@tvzapao.com.br
140058825320 11959924507@tvzapao.com.br
139412630417 11979516121@tvzapao.com.br
140058611288 11951000884@tvzapao.com.br
140059537000 11981731786@tvzapao.com.br
139412442525 5511981426343@tvzapao.com.br`;

const batch2 = `139409264031 19999998607@tvzapao.com.br
140059972842 11957870635@tvzapao.com.br
139412630673 11986856552@tvzapao.com.br
140059665200 11953896928@tvzapao.com.br
140058741608 11983530777@tvzapao.com.br
139412550753 5511977371380@tvzapao.com.br
139409786043 11983900488@tvzapao.com.br
140059979004 11954565390@tvzapao.com.br
140059027458 11963680490@tvzapao.com.br
140061406454 11969896389@tvzapao.com.br
140058795742 11980951137@tvzapao.com.br
140058503784 11951790648@tvzapao.com.br
139410461807 11975663133@tvzapao.com.br
140059973138 11949038697@tvzapao.com.br
140060668936 11949376957@tvzapao.com.br
139410506073 11957068169@tvzapao.com.br
140060025282 11947256956@tvzapao.com.br
140060669024 11960307673@tvzapao.com.br
139411893367 11977331058@tvzapao.com.br
139412027269 11999644450@tvzapao.com.br
140058742034 11955520954@tvzapao.com.br
140061080922 11985300134@tvzapao.com.br
140065156418 11983952990@tvzapao.com.br
140064532792 11952264383@tvzapao.com.br
139417150621 11943402223@tvzapao.com.br
139418284147 11983952990@tvzapao.com.br
139416480971 11999027345@tvzapao.com.br
140062477910 11987267764@tvzapao.com.br
139415155735 11962787873@tvzapao.com.br
140064533080 11930186164@tvzapao.com.br
139416265279 11952561588@tvzapao.com.br
139417150997 11983952990@tvzapao.com.br`;

// Expected IDs (85 total)
const expectedIds = [
    '140050582254', '140054102170', '139406100999', '140054806722', '139410830895',
    '140058810890', '140059972312', '140058131128', '139410505139', '139408853871',
    '140056224096', '139410289241', '139410451163', '140059902438', '140057329680',
    '139411892485', '140058131196', '140059026868', '139410505197', '140057329702',
    '139412442243', '139410505205', '140059664600', '139409785471', '140059736552',
    '140059026908', '140060598166', '139410992949', '139409089883', '139412026495',
    '140058307334', '139410289365', '140058741130', '140059370810', '140059026984',
    '139410505347', '140058307374', '140059144922', '140058825212', '139408798001',
    '140057329862', '139412630341', '140060024606', '140060008602', '139410505449',
    '139409489769', '140059370912', '140059552894', '140058825320', '139412630417',
    '140058611288', '140059537000', '139412442525', '139409264031', '140059972842',
    '139412630673', '140059665200', '140058741608', '139412550753', '139409786043',
    '140059979004', '140059027458', '140061406454', '140058795742', '140058503784',
    '139410461807', '140059973138', '140060668936', '139410506073', '140060025282',
    '140060669024', '139411893367', '139412027269', '140058742034', '140061080922',
    '140065156418', '140064532792', '139417150621', '139418284147', '139416480971',
    '140062477910', '139415155735', '140064533080', '139416265279', '139417150997'
];

// Parse user data
const allData = (batch1 + '\n' + batch2).split('\n').filter(l => l.trim());
const parsed = allData.map(line => {
    const [id, email] = line.trim().split(' ');
    const phone = email.replace('@tvzapao.com.br', '').replace(/^55/, '');
    return { id, phone };
});

console.log(`Total entries received: ${parsed.length}`);
console.log(`Expected: ${expectedIds.length}`);

// Check for missing IDs
const receivedIds = parsed.map(p => p.id);
const missingIds = expectedIds.filter(id => !receivedIds.includes(id));
console.log(`\n--- MISSING IDs (${missingIds.length}) ---`);
if (missingIds.length > 0) {
    missingIds.forEach(id => console.log(`  ${id}`));
} else {
    console.log('  ✅ Nenhum ID faltando!');
}

// Check for duplicate phones
const phoneToIds = {};
parsed.forEach(p => {
    if (!phoneToIds[p.phone]) phoneToIds[p.phone] = [];
    phoneToIds[p.phone].push(p.id);
});

const duplicatePhones = Object.entries(phoneToIds).filter(([phone, ids]) => ids.length > 1);
console.log(`\n--- TELEFONES DUPLICADOS (${duplicatePhones.length}) ---`);
if (duplicatePhones.length > 0) {
    duplicatePhones.forEach(([phone, ids]) => {
        console.log(`  ${phone}: ${ids.join(', ')}`);
    });
} else {
    console.log('  ✅ Nenhum telefone duplicado!');
}

// Check for extra IDs not in expected list
const extraIds = receivedIds.filter(id => !expectedIds.includes(id));
console.log(`\n--- IDs EXTRAS (não esperados) ---`);
if (extraIds.length > 0) {
    extraIds.forEach(id => console.log(`  ${id}`));
} else {
    console.log('  ✅ Nenhum ID extra!');
}
